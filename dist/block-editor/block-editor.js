!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=28)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t){e.exports=window.wp.richText},function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}e.exports=r},function(e,t,r){var n=r(22);e.exports=function(e,t){if(null==e)return{};var r,o,i=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){var n=r(20);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){var n=r(21),o=r(3);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?o(e):t}},function(e,t,r){var n;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var a=o.apply(null,n);a&&e.push(a)}else if("object"===i)for(var c in n)r.call(n,c)&&n[c]&&e.push(c)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.keycodes},function(e,t){e.exports=window.wp.hooks},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t){e.exports=window.wp.dom},function(e,t,r){var n=r(23),o=r(24),i=r(25),a=r(26);e.exports=function(e){return n(e)||o(e)||i(e)||a()}},function(e,t){e.exports=window.wp.compose},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t){function r(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}},function(e,t,r){var n=r(16);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t,r){var n=r(16);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},,function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"name",(function(){return te})),r.d(n,"settings",(function(){return re}));var o=r(5),i=r(8),a=r.n(i),c=r(9),p=r.n(c),u=r(3),l=r.n(u),s=r(10),d=r.n(s),f=r(11),g=r.n(f),b=r(4),m=r.n(b),v=r(0),h=r(1),y=r(2),O=r(13),C=Object(v.createElement)("svg",{viewBox:"0 0 106 84",width:24,height:24,className:"popup-trigger-button-svg"},Object(v.createElement)("path",{d:"M 74.98 0.00 L 80.18 0.00 C 86.85 0.96 93.11 3.19 97.92 8.09 C 102.82 12.91 105.07 19.19 106.00 25.89 L 106.00 29.25 C 105.01 36.93 101.84 43.76 95.96 48.90 C 85.62 57.23 75.10 65.38 64.88 73.86 C 58.14 79.85 49.63 82.94 40.76 84.00 L 36.17 84.00 C 27.56 83.00 19.39 80.03 12.89 74.16 C 5.17 67.38 1.08 57.89 0.00 47.78 L 0.00 43.19 C 1.06 33.34 4.97 24.08 12.35 17.32 C 19.55 10.62 29.39 7.33 38.98 6.07 C 50.98 4.07 63.06 2.41 74.98 0.00 Z",fill:"#98b729"}),Object(v.createElement)("path",{d:"M 73.27 3.38 C 78.51 2.46 83.84 3.16 88.72 5.25 C 99.12 9.98 105.12 21.94 102.29 33.09 C 100.93 39.34 97.06 44.25 92.19 48.20 C 84.32 54.30 76.63 60.62 68.82 66.78 C 65.27 69.54 61.99 72.75 58.21 75.17 C 53.04 78.31 47.09 80.42 41.04 80.90 C 26.64 81.98 12.34 73.74 6.37 60.53 C 0.78 48.69 2.33 34.56 10.17 24.12 C 16.07 16.10 25.11 11.68 34.69 9.75 C 47.55 7.61 60.45 5.72 73.27 3.38 Z",fill:"#262d2b"}),Object(v.createElement)("path",{d:"M 73.39 7.40 C 79.51 6.31 85.83 7.34 90.84 11.17 C 97.78 16.34 100.76 25.75 97.94 33.97 C 96.07 39.49 92.17 43.26 87.63 46.67 C 80.70 52.04 73.92 57.62 67.04 63.05 C 61.52 67.32 57.24 72.00 50.55 74.56 C 39.66 79.19 26.67 77.04 17.82 69.21 C 10.09 62.55 6.01 52.13 7.21 41.99 C 8.21 32.78 13.46 24.27 21.21 19.22 C 29.30 14.01 37.69 13.29 46.90 11.83 C 55.73 10.34 64.58 9.05 73.39 7.40 Z",fill:"#98b729"}),Object(v.createElement)("path",{d:"M 79.33 11.15 C 80.91 11.34 82.49 11.77 84.05 12.13 C 83.96 13.78 83.90 15.42 83.83 17.07 C 85.21 18.44 86.59 19.81 87.96 21.19 C 89.56 21.12 91.16 21.05 92.76 20.97 C 93.19 22.58 93.62 24.19 94.07 25.79 C 92.62 26.56 91.18 27.34 89.74 28.11 C 89.27 30.00 88.80 31.89 88.29 33.77 C 89.17 35.11 90.05 36.46 90.93 37.80 C 89.75 38.99 88.56 40.18 87.37 41.36 C 86.03 40.50 84.69 39.65 83.36 38.79 C 81.43 39.31 79.50 39.83 77.57 40.33 C 76.86 41.76 76.14 43.18 75.44 44.61 C 73.84 44.14 72.22 43.70 70.60 43.30 C 70.70 41.70 70.79 40.09 70.89 38.49 C 69.46 37.08 68.05 35.65 66.64 34.22 C 65.07 34.33 63.50 34.41 61.94 34.52 C 61.54 32.88 61.09 31.25 60.61 29.63 C 62.04 28.92 63.45 28.20 64.87 27.48 C 65.38 25.56 65.93 23.65 66.45 21.74 C 65.57 20.37 64.69 19.01 63.80 17.65 C 64.99 16.46 66.17 15.27 67.36 14.08 C 68.70 14.97 70.04 15.86 71.38 16.75 C 73.20 16.26 75.02 15.78 76.84 15.32 C 77.62 13.91 78.39 12.46 79.33 11.15 Z",fill:"#262d2b"}),Object(v.createElement)("path",{d:"M 31.46 18.53 C 35.73 17.41 39.75 17.90 44.06 18.38 C 43.69 20.25 43.38 22.13 43.00 23.99 C 46.30 25.32 49.40 26.46 52.10 28.89 C 56.07 32.21 58.00 36.65 59.46 41.49 C 61.32 41.26 63.19 41.04 65.06 40.81 C 65.30 45.35 65.55 49.64 64.02 54.02 C 62.82 57.89 60.52 60.95 58.09 64.10 C 56.66 62.88 55.24 61.65 53.81 60.43 C 50.80 62.88 47.90 65.17 44.07 66.21 C 39.50 67.65 35.11 67.00 30.55 65.99 C 29.84 67.72 29.12 69.46 28.40 71.19 C 24.48 69.34 20.78 67.44 17.87 64.12 C 14.90 61.08 13.34 57.40 11.80 53.51 C 13.55 52.89 15.31 52.27 17.06 51.65 C 16.43 47.16 15.95 42.88 17.48 38.49 C 18.70 34.52 21.22 31.56 23.95 28.54 C 22.80 27.05 21.69 25.54 20.55 24.05 C 23.99 21.67 27.30 19.46 31.46 18.53 Z",fill:"#262d2b"}),Object(v.createElement)("path",{d:"M 76.34 24.32 C 79.21 23.52 81.89 26.79 80.48 29.46 C 79.35 31.71 76.40 32.21 74.62 30.38 C 72.72 28.34 73.67 25.06 76.34 24.32 Z",fill:"#98b729"}),Object(v.createElement)("path",{d:"M 33.46 26.53 C 40.08 24.87 47.25 27.17 51.85 32.16 C 57.28 37.94 58.59 46.87 54.94 53.94 C 51.18 61.61 42.36 65.97 33.97 64.14 C 25.47 62.43 18.97 54.70 18.77 46.02 C 18.32 36.96 24.64 28.60 33.46 26.53 Z",fill:"#98b729"})),j=r(6),_=r.n(j),k=r(7),w=r.n(k),E=r(14),x=r(17);function T(e){var t=e.popupId,r=void 0===t?0:t,n=e.doDefault,o=void 0!==n&&n,i=o?"pum-do-default":"";return{type:te,attributes:{class:"popmake-".concat(r," ").concat(i),popupId:"".concat(r),doDefault:o?"1":"0"}}}var S=["additionalControls","children","renderSettings","position","focusOnMount","noticeUI"];function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var o=m()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g()(this,r)}}var P=function(e){d()(r,e);var t=I(r);function r(){var e;return a()(this,r),(e=t.apply(this,arguments)).toggleSettingsVisibility=e.toggleSettingsVisibility.bind(l()(e)),e.state={isSettingsExpanded:!1},e}return p()(r,[{key:"toggleSettingsVisibility",value:function(){this.setState({isSettingsExpanded:!this.state.isSettingsExpanded})}},{key:"render",value:function(){var e=this.props,t=e.additionalControls,r=e.children,n=e.renderSettings,o=e.position,i=void 0===o?"bottom center":o,a=e.focusOnMount,c=void 0===a?"firstElement":a,p=e.noticeUI,u=w()(e,S),l=this.state.isSettingsExpanded,s=!!n&&l;return Object(v.createElement)(y.Popover,_()({className:"editor-popup-trigger-popover block-editor-popup-trigger-popover",focusOnMount:c,position:i},u),Object(v.createElement)("div",{className:"block-editor-popup-trigger-popover__input-container"},p,Object(v.createElement)("div",{className:"editor-popup-trigger-popover__row block-editor-popup-trigger-popover__row"},r,!!n&&Object(v.createElement)(y.IconButton,{className:"editor-popup-trigger-popover__settings-toggle block-editor-popup-trigger-popover__settings-toggle",icon:"arrow-down-alt2",label:Object(h.__)("Trigger settings","popup-maker"),onClick:this.toggleSettingsVisibility,"aria-expanded":l})),s&&Object(v.createElement)("div",{className:"editor-popup-trigger-popover__row block-editor-popup-trigger-popover__row editor-popup-trigger-popover__settings block-editor-popup-trigger-popover__settings"},n())),t&&!s&&Object(v.createElement)("div",{className:"block-editor-popup-trigger-popover__additional-controls"},t))}}]),r}(v.Component),R=r(12),A=r.n(R),D=r(18),N=r.n(D),F=["onChangeInputValue","value","label","emptyValueLabel","hideLabelFromVision"];function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var o=m()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g()(this,r)}}var M=window.pum_block_editor_vars.popups,B=function(e){d()(r,e);var t=L(r);function r(){return a()(this,r),t.apply(this,arguments)}return p()(r,[{key:"render",value:function(){var e=this.props,t=e.onChangeInputValue,r=e.value,n=e.label,o=void 0===n?Object(h.__)("Select Popup","popup-maker"):n,i=e.emptyValueLabel,a=void 0===i?Object(h.__)("Choose a popup","popup-maker"):i,c=e.hideLabelFromVision,p=void 0!==c&&c,u=w()(e,F),l=[{value:"",label:a}].concat(N()(M.map((function(e){return{value:"".concat(e.ID),label:e.post_title}}))));return Object(v.createElement)("div",{className:"block-editor-popup-select-input"},Object(v.createElement)(y.SelectControl,_()({label:o,hideLabelFromVision:p,value:r,onChange:t,options:l},u)))}}]),r}(v.Component),V=["className","onChangeInputValue","value"];function U(e){var t=e.className,r=e.onChangeInputValue,n=e.value,o=w()(e,V);return Object(v.createElement)("form",_()({className:A()("block-editor-popup-trigger-popover__popup-editor",t)},o),Object(v.createElement)(B,{emptyValueLabel:Object(h.__)("Which popup should open?","popup-maker"),hideLabelFromVision:!0,value:n,onChange:r,required:!0}),Object(v.createElement)(y.IconButton,{icon:"editor-break",label:Object(h.__)("Apply","popup-maker"),type:"submit"}))}var Z=["className","spanClassName","onEditLinkClick","popupId"],K=(window.pum_block_editor_vars||[]).popups;function z(e){var t=e.popupId,r=e.className,n=A()(r,"block-editor-popup-trigger-popover__popup-viewer-text"),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=parseInt(e)||0;var t=K.filter((function(t){var r=t.ID;return e===r}));return 1===t.length&&t[0]}(t),i=o?Object(h.sprintf)(Object(h.__)('Open "%s" popup',"popup-maker"),o.post_title):"";return Object(v.createElement)("span",{className:n},i)}function H(e){var t=e.className,r=e.spanClassName,n=e.onEditLinkClick,o=e.popupId,i=w()(e,Z);return Object(v.createElement)("div",_()({className:A()("block-editor-popup-trigger-popover__popup-viewer",t)},i),Object(v.createElement)(z,{popupId:o,className:r}),n&&Object(v.createElement)(y.IconButton,{icon:"edit",label:Object(h.__)("Edit","popup-maker"),onClick:n}))}var W=["isActive","addingTrigger","value"];function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var o=m()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g()(this,r)}}var G=function(e){return e.stopPropagation()};function $(e,t){return e.addingTrigger||t.editTrigger}var J=function(e){var t=e.isActive,r=e.addingTrigger,n=e.value,o=w()(e,W),i=Object(v.useMemo)((function(){var e=window.getSelection(),t=e.rangeCount>0?e.getRangeAt(0):null;if(t){if(r)return Object(x.getRectangleFromRange)(t);var n=t.startContainer;for(n=n.nextElementSibling||n;n.nodeType!==window.Node.ELEMENT_NODE;)n=n.parentNode;var o=n.closest("span.popup-trigger");return o?o.getBoundingClientRect():void 0}}),[t,r,n.start,n.end]);return i?Object(v.createElement)(P,_()({anchorRect:i},o)):null},Q=function(e){d()(r,e);var t=q(r);function r(){var e;return a()(this,r),(e=t.apply(this,arguments)).editTrigger=e.editTrigger.bind(l()(e)),e.setPopupID=e.setPopupID.bind(l()(e)),e.setDoDefault=e.setDoDefault.bind(l()(e)),e.onFocusOutside=e.onFocusOutside.bind(l()(e)),e.submitTrigger=e.submitTrigger.bind(l()(e)),e.resetState=e.resetState.bind(l()(e)),e.state={doDefault:!1,popupId:""},e}return p()(r,[{key:"onKeyDown",value:function(e){[E.LEFT,E.DOWN,E.RIGHT,E.UP,E.BACKSPACE,E.ENTER].indexOf(e.keyCode)>-1&&e.stopPropagation()}},{key:"setPopupID",value:function(e){var t=this.props.noticeOperations;t.removeNotice("missingPopupId"),""===e&&t.createNotice({id:"missingPopupId",status:"error",content:Object(h.__)("Choose a popup or the trigger won't function.","popup-maker")}),this.setState({popupId:e})}},{key:"setDoDefault",value:function(e){var t=this.props,r=t.activeAttributes.popupId,n=void 0===r?0:r,i=t.value,a=t.onChange;this.setState({doDefault:e}),$(this.props,this.state)||a(Object(o.applyFormat)(i,T({popupId:n,doDefault:e})))}},{key:"editTrigger",value:function(e){this.setState({editTrigger:!0}),e.preventDefault()}},{key:"submitTrigger",value:function(e){var t=this.props,r=t.isActive,n=t.value,i=t.onChange,a=t.speak,c=this.state,p=T({popupId:c.popupId,doDefault:c.doDefault});if(e.preventDefault(),Object(o.isCollapsed)(n)&&!r){var u=Object(o.applyFormat)(Object(o.create)({text:Object(h.__)("Open Popup","popup-maker")}),p,0,Object(h.__)("Open Popup","popup-maker").length);i(Object(o.insert)(n,u))}else i(Object(o.applyFormat)(n,p));this.resetState(),a(r?Object(h.__)("Trigger edited.","popup-maker"):Object(h.__)("Trigger inserted.","popup-maker"),"assertive")}},{key:"onFocusOutside",value:function(){this.resetState()}},{key:"resetState",value:function(){this.props.stopAddingTrigger(),this.setState({editTrigger:!1})}},{key:"render",value:function(){var e=this,t=this.props,r=t.isActive,n=t.addingTrigger,o=t.value,i=t.noticeUI;if(!r&&!n)return null;var a=this.state,c=a.popupId,p=a.doDefault,u=$(this.props,this.state);return Object(v.createElement)(J,{value:o,isActive:r,addingTrigger:n,onFocusOutside:this.onFocusOutside,onClose:this.resetState,noticeUI:i,focusOnMount:!!u&&"firstElement",renderSettings:function(){return Object(v.createElement)(y.ToggleControl,{label:Object(h.__)("Do default browser action?","popup-maker"),checked:p,onChange:e.setDoDefault})}},u?Object(v.createElement)(U,{className:"editor-format-toolbar__link-container-content block-editor-format-toolbar__link-container-content",value:c,onChangeInputValue:this.setPopupID,onKeyDown:this.onKeyDown,onKeyPress:G,onSubmit:this.submitTrigger}):Object(v.createElement)(H,{className:"editor-format-toolbar__link-container-content block-editor-format-toolbar__link-container-content",onKeyPress:G,popupId:c,onEditLinkClick:this.editTrigger}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.activeAttributes,n=r.popupId,o=void 0===n?"":n,i=r.doDefault,a=void 0!==i&&i;if(window._.isString(a)&&(a="1"===a),!$(e,t)){var c={};return o!==t.popupId&&(c.popupId=o),a!==t.doDefault&&(c.doDefault=a),Object.keys(c).length?c:null}return null}}]),r}(v.Component),X=Object(y.withSpokenMessages)(Object(y.withNotices)(Q));function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var o=m()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g()(this,r)}}var ee=Object(h.__)("Popup Trigger","popup-maker"),te="popup-maker/popup-trigger",re={name:te,title:ee,tagName:"span",className:"popup-trigger",attributes:{popupId:"data-popup-id",doDefault:"data-do-default"},edit:Object(y.withSpokenMessages)(function(e){d()(r,e);var t=Y(r);function r(){var e;return a()(this,r),(e=t.apply(this,arguments)).addTrigger=e.addTrigger.bind(l()(e)),e.stopAddingTrigger=e.stopAddingTrigger.bind(l()(e)),e.onRemoveFormat=e.onRemoveFormat.bind(l()(e)),e.state={addingTrigger:!1},e}return p()(r,[{key:"addTrigger",value:function(){this.setState({addingTrigger:!0})}},{key:"stopAddingTrigger",value:function(){this.setState({addingTrigger:!1})}},{key:"onRemoveFormat",value:function(){var e=this.props,t=e.value,r=e.onChange,n=e.speak;r(Object(o.removeFormat)(t,te)),n(Object(h.__)("Trigger removed.","popup-maker"),"assertive")}},{key:"render",value:function(){var e=this.props,t=e.isActive,r=e.activeAttributes,n=e.value,o=e.onChange;return Object(v.createElement)(v.Fragment,null,Object(v.createElement)(O.RichTextShortcut,{type:"primary",character:"[",onUse:this.addTrigger}),Object(v.createElement)(O.RichTextShortcut,{type:"primaryShift",character:"[",onUse:this.onRemoveFormat}),t&&Object(v.createElement)(O.RichTextToolbarButton,{icon:C,title:Object(h.__)("Remove Trigger","popup-maker"),onClick:this.onRemoveFormat,isActive:t,shortcutType:"primaryShift",shortcutCharacter:"["}),!t&&Object(v.createElement)(O.RichTextToolbarButton,{icon:C,title:ee,onClick:this.addTrigger,isActive:t,shortcutType:"primary",shortcutCharacter:"["}),Object(v.createElement)(X,{addingTrigger:this.state.addingTrigger,stopAddingTrigger:this.stopAddingTrigger,isActive:t,activeAttributes:r,value:n,onChange:o}))}}]),r}(v.Component))};[n].forEach((function(e){var t=e.name,r=e.settings;return Object(o.registerFormatType)(t,r)}));var ne=r(15),oe=r(19),ie=Object(v.createElement)("svg",{viewBox:"0 0 512 512",width:20,height:20},Object(v.createElement)("path",{d:"M348,327.195v-35.741l-32.436-11.912c-2.825-10.911-6.615-21.215-12.216-30.687l0.325-0.042l15.438-32.153l-25.2-25.269  l-32.118,15.299l-0.031,0.045c-9.472-5.601-19.758-9.156-30.671-11.978L219.186,162h-35.739l-11.913,32.759  c-10.913,2.821-21.213,6.774-30.685,12.379l-0.048-0.248l-32.149-15.399l-25.269,25.219l15.299,32.124l0.05,0.039  c-5.605,9.471-11.159,19.764-13.98,30.675L50,291.454v35.741l34.753,11.913c2.821,10.915,7.774,21.211,13.38,30.685l0.249,0.045  l-15.147,32.147l25.343,25.274l32.188-15.298l0.065-0.046c9.474,5.597,19.782,10.826,30.695,13.652L183.447,460h35.739  l11.915-34.432c10.913-2.826,21.209-7.614,30.681-13.215l0.05-0.175l32.151,15.192l25.267-25.326l-15.299-32.182l-0.046-0.061  c5.601-9.473,8.835-19.776,11.66-30.688L348,327.195z M201.318,368.891c-32.897,0-59.566-26.662-59.566-59.565  c0-32.896,26.669-59.568,59.566-59.568c32.901,0,59.566,26.672,59.566,59.568C260.884,342.229,234.219,368.891,201.318,368.891z"}),Object(v.createElement)("path",{d:"M462.238,111.24l-7.815-18.866l-20.23,1.012c-3.873-5.146-8.385-9.644-13.417-13.42l0.038-0.043l1.06-20.318l-18.859-7.822  L389.385,66.89l-0.008,0.031c-6.229-0.883-12.619-0.933-18.988-0.025L356.76,51.774l-18.867,7.815l1.055,20.32  c-5.152,3.873-9.627,8.422-13.403,13.46l-0.038-0.021l-20.317-1.045l-7.799,18.853l15.103,13.616l0.038,0.021  c-0.731,5.835-1.035,12.658-0.133,19.038l-15.208,13.662l7.812,18.87l20.414-1.086c3.868,5.144,8.472,9.613,13.495,13.385  l0.013,0.025l-1.03,20.312l20.668,7.815L374,201.703v-0.033c4,0.731,10.818,0.935,17.193,0.04l12.729,15.114l18.42-7.813  l-1.286-20.324c5.144-3.875,9.521-8.424,13.297-13.456l-0.023,0.011l20.287,1.047l7.802-18.864l-15.121-13.624l-0.033-0.019  c0.877-6.222,0.852-12.58-0.05-18.953L462.238,111.24z M392.912,165.741c-17.359,7.19-37.27-1.053-44.462-18.421  c-7.196-17.364,1.047-37.272,18.415-44.465c17.371-7.192,37.274,1.053,44.471,18.417  C418.523,138.643,410.276,158.547,392.912,165.741z"})),ae=[],ce=pum_block_editor_vars.popup_trigger_excluded_blocks||["core/nextpage"];function pe(e){return!ae.length&&!ce.length||(ae.length?ae.includes(e):!ce.length||!ce.includes(e))}var ue=Object(oe.createHigherOrderComponent)((function(e){return function(t){var r=t.name,n=t.attributes,o=t.setAttributes,i=t.isSelected,a=n.openPopupId;return Object(v.createElement)(v.Fragment,null,Object(v.createElement)(e,t),i&&pe(r)&&Object(v.createElement)(O.InspectorControls,null,Object(v.createElement)(y.Panel,{className:"pum-block-inspector-popup-controls"},Object(v.createElement)(y.PanelBody,{title:Object(h.__)("Popup Controls","popup-maker"),icon:ie,initialOpen:!1},Object(v.createElement)(y.PanelRow,null,Object(h.__)("These settings allow you to control popups with this block.","popup-maker")),Object(v.createElement)(y.PanelRow,null,Object(v.createElement)(B,{label:Object(v.createElement)(v.Fragment,null,Object(h.__)("Open Popup","popup-maker"),Object(v.createElement)(y.Tooltip,{position:"top",text:Object(h.__)("This method does not work well with all block types.","popup-maker")},Object(v.createElement)("a",{href:"https://docs.wppopupmaker.com/article/395-trigger-click-open-overview-methods",target:"_blank",rel:"noopener noreferrer"},Object(v.createElement)(y.Icon,{size:"16",icon:"editor-help",title:Object(h.__)("Open documentation","popup-maker"),style:{verticalAlign:"middle"}})))),value:a,onChange:function(e){return o({openPopupId:e})},help:Object(h.__)("Open a popup when clicking this block","popup-maker")}))))))}}),"withAdvancedControls");Object(ne.addFilter)("blocks.registerBlockType","popup-maker/popup-trigger-attributes",(function(e){return void 0!==e.attributes&&pe(e.name)&&(e.attributes=Object.assign(e.attributes,{openPopupId:{type:"string",default:""}})),e})),Object(ne.addFilter)("editor.BlockEdit","popup-maker/popup-trigger-advanced-control",ue),Object(ne.addFilter)("blocks.getSaveContent.extraProps","popup-maker/applyTriggerClass",(function(e,t,r){var n=r.openPopupId;return void 0!==n&&n>0&&pe(t.name)&&(e.className=A()(e.className,"popmake-"+n)),e}))}]);