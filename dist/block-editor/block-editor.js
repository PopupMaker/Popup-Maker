!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=30)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wp.richText},function(e,t){function r(){return e.exports=r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,r.apply(null,arguments)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var o=r(24);e.exports=function(e,t){if(null==e)return{};var r,n,i=o(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(n=0;n<p.length;n++)r=p[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var o=r(20);function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var o=r(15).default,n=r(22);e.exports=function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var o=r(23);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var o;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=p(e,i(r)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var o in e)r.call(e,o)&&e[o]&&(t=p(t,o));return t}function p(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0===(o=function(){return n}.apply(t,[]))||(e.exports=o)}()},function(e,t){e.exports=window.wp.blockEditor},function(e,t){e.exports=window.wp.keycodes},function(e,t){e.exports=window.wp.hooks},function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wp.dom},function(e,t,r){var o=r(25),n=r(26),i=r(27),p=r(28);e.exports=function(e){return o(e)||n(e)||i(e)||p()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=window.wp.compose},function(e,t,r){var o=r(15).default,n=r(21);e.exports=function(e){var t=n(e,"string");return"symbol"==o(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var o=r(15).default;e.exports=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function r(t,o){return e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t,o)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(null==e)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;r[o]=e[o]}return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var o=r(16);e.exports=function(e){if(Array.isArray(e))return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var o=r(16);e.exports=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},,function(e,t,r){"use strict";r.r(t);var o={};r.r(o),r.d(o,"name",(function(){return Y})),r.d(o,"settings",(function(){return ee}));var n=r(4),i=r(7),p=r.n(i),a=r(8),u=r.n(a),c=r(9),l=r.n(c),s=r(3),d=r.n(s),f=r(10),g=r.n(f),b=r(0),m=r(1),v=r(2),h=r(12),_=Object(b.createElement)("svg",{viewBox:"0 0 106 84",width:24,height:24,className:"popup-trigger-button-svg"},Object(b.createElement)("path",{d:"M 74.98 0.00 L 80.18 0.00 C 86.85 0.96 93.11 3.19 97.92 8.09 C 102.82 12.91 105.07 19.19 106.00 25.89 L 106.00 29.25 C 105.01 36.93 101.84 43.76 95.96 48.90 C 85.62 57.23 75.10 65.38 64.88 73.86 C 58.14 79.85 49.63 82.94 40.76 84.00 L 36.17 84.00 C 27.56 83.00 19.39 80.03 12.89 74.16 C 5.17 67.38 1.08 57.89 0.00 47.78 L 0.00 43.19 C 1.06 33.34 4.97 24.08 12.35 17.32 C 19.55 10.62 29.39 7.33 38.98 6.07 C 50.98 4.07 63.06 2.41 74.98 0.00 Z",fill:"#98b729"}),Object(b.createElement)("path",{d:"M 73.27 3.38 C 78.51 2.46 83.84 3.16 88.72 5.25 C 99.12 9.98 105.12 21.94 102.29 33.09 C 100.93 39.34 97.06 44.25 92.19 48.20 C 84.32 54.30 76.63 60.62 68.82 66.78 C 65.27 69.54 61.99 72.75 58.21 75.17 C 53.04 78.31 47.09 80.42 41.04 80.90 C 26.64 81.98 12.34 73.74 6.37 60.53 C 0.78 48.69 2.33 34.56 10.17 24.12 C 16.07 16.10 25.11 11.68 34.69 9.75 C 47.55 7.61 60.45 5.72 73.27 3.38 Z",fill:"#262d2b"}),Object(b.createElement)("path",{d:"M 73.39 7.40 C 79.51 6.31 85.83 7.34 90.84 11.17 C 97.78 16.34 100.76 25.75 97.94 33.97 C 96.07 39.49 92.17 43.26 87.63 46.67 C 80.70 52.04 73.92 57.62 67.04 63.05 C 61.52 67.32 57.24 72.00 50.55 74.56 C 39.66 79.19 26.67 77.04 17.82 69.21 C 10.09 62.55 6.01 52.13 7.21 41.99 C 8.21 32.78 13.46 24.27 21.21 19.22 C 29.30 14.01 37.69 13.29 46.90 11.83 C 55.73 10.34 64.58 9.05 73.39 7.40 Z",fill:"#98b729"}),Object(b.createElement)("path",{d:"M 79.33 11.15 C 80.91 11.34 82.49 11.77 84.05 12.13 C 83.96 13.78 83.90 15.42 83.83 17.07 C 85.21 18.44 86.59 19.81 87.96 21.19 C 89.56 21.12 91.16 21.05 92.76 20.97 C 93.19 22.58 93.62 24.19 94.07 25.79 C 92.62 26.56 91.18 27.34 89.74 28.11 C 89.27 30.00 88.80 31.89 88.29 33.77 C 89.17 35.11 90.05 36.46 90.93 37.80 C 89.75 38.99 88.56 40.18 87.37 41.36 C 86.03 40.50 84.69 39.65 83.36 38.79 C 81.43 39.31 79.50 39.83 77.57 40.33 C 76.86 41.76 76.14 43.18 75.44 44.61 C 73.84 44.14 72.22 43.70 70.60 43.30 C 70.70 41.70 70.79 40.09 70.89 38.49 C 69.46 37.08 68.05 35.65 66.64 34.22 C 65.07 34.33 63.50 34.41 61.94 34.52 C 61.54 32.88 61.09 31.25 60.61 29.63 C 62.04 28.92 63.45 28.20 64.87 27.48 C 65.38 25.56 65.93 23.65 66.45 21.74 C 65.57 20.37 64.69 19.01 63.80 17.65 C 64.99 16.46 66.17 15.27 67.36 14.08 C 68.70 14.97 70.04 15.86 71.38 16.75 C 73.20 16.26 75.02 15.78 76.84 15.32 C 77.62 13.91 78.39 12.46 79.33 11.15 Z",fill:"#262d2b"}),Object(b.createElement)("path",{d:"M 31.46 18.53 C 35.73 17.41 39.75 17.90 44.06 18.38 C 43.69 20.25 43.38 22.13 43.00 23.99 C 46.30 25.32 49.40 26.46 52.10 28.89 C 56.07 32.21 58.00 36.65 59.46 41.49 C 61.32 41.26 63.19 41.04 65.06 40.81 C 65.30 45.35 65.55 49.64 64.02 54.02 C 62.82 57.89 60.52 60.95 58.09 64.10 C 56.66 62.88 55.24 61.65 53.81 60.43 C 50.80 62.88 47.90 65.17 44.07 66.21 C 39.50 67.65 35.11 67.00 30.55 65.99 C 29.84 67.72 29.12 69.46 28.40 71.19 C 24.48 69.34 20.78 67.44 17.87 64.12 C 14.90 61.08 13.34 57.40 11.80 53.51 C 13.55 52.89 15.31 52.27 17.06 51.65 C 16.43 47.16 15.95 42.88 17.48 38.49 C 18.70 34.52 21.22 31.56 23.95 28.54 C 22.80 27.05 21.69 25.54 20.55 24.05 C 23.99 21.67 27.30 19.46 31.46 18.53 Z",fill:"#262d2b"}),Object(b.createElement)("path",{d:"M 76.34 24.32 C 79.21 23.52 81.89 26.79 80.48 29.46 C 79.35 31.71 76.40 32.21 74.62 30.38 C 72.72 28.34 73.67 25.06 76.34 24.32 Z",fill:"#98b729"}),Object(b.createElement)("path",{d:"M 33.46 26.53 C 40.08 24.87 47.25 27.17 51.85 32.16 C 57.28 37.94 58.59 46.87 54.94 53.94 C 51.18 61.61 42.36 65.97 33.97 64.14 C 25.47 62.43 18.97 54.70 18.77 46.02 C 18.32 36.96 24.64 28.60 33.46 26.53 Z",fill:"#98b729"})),O=r(5),y=r.n(O),C=r(6),x=r.n(C),j=r(13),k=r(17);function w(e){var t=e.popupId,r=void 0===t?0:t,o=e.doDefault,n=void 0!==o&&o,i=n?"pum-do-default":"";return{type:Y,attributes:{class:"popmake-".concat(r," ").concat(i),popupId:"".concat(r),doDefault:n?"1":"0"}}}var E=["additionalControls","children","renderSettings","position","focusOnMount","noticeUI"];function T(e,t,r){return t=d()(t),l()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],d()(e).constructor):t.apply(e,r))}var S=function(e){function t(){var e;return p()(this,t),(e=T(this,t,arguments)).toggleSettingsVisibility=e.toggleSettingsVisibility.bind(e),e.state={isSettingsExpanded:!1},e}return g()(t,e),u()(t,[{key:"toggleSettingsVisibility",value:function(){this.setState({isSettingsExpanded:!this.state.isSettingsExpanded})}},{key:"render",value:function(){var e=this.props,t=e.additionalControls,r=e.children,o=e.renderSettings,n=e.position,i=void 0===n?"bottom center":n,p=e.focusOnMount,a=void 0===p?"firstElement":p,u=e.noticeUI,c=x()(e,E),l=this.state.isSettingsExpanded,s=!!o&&l;return Object(b.createElement)(v.Popover,y()({className:"editor-popup-trigger-popover block-editor-popup-trigger-popover",focusOnMount:a,position:i},c),Object(b.createElement)("div",{className:"block-editor-popup-trigger-popover__input-container"},u,Object(b.createElement)("div",{className:"editor-popup-trigger-popover__row block-editor-popup-trigger-popover__row"},r,!!o&&Object(b.createElement)(v.IconButton,{className:"editor-popup-trigger-popover__settings-toggle block-editor-popup-trigger-popover__settings-toggle",icon:"arrow-down-alt2",label:Object(m.__)("Trigger settings","popup-maker"),onClick:this.toggleSettingsVisibility,"aria-expanded":l})),s&&Object(b.createElement)("div",{className:"editor-popup-trigger-popover__row block-editor-popup-trigger-popover__row editor-popup-trigger-popover__settings block-editor-popup-trigger-popover__settings"},o())),t&&!s&&Object(b.createElement)("div",{className:"block-editor-popup-trigger-popover__additional-controls"},t))}}])}(b.Component),I=r(11),P=r.n(I),M=r(18),D=r.n(M),N=["onChangeInputValue","value","label","emptyValueLabel","hideLabelFromVision"];function A(e,t,r){return t=d()(t),l()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],d()(e).constructor):t.apply(e,r))}var F=window.pum_block_editor_vars.popups,R=function(e){function t(){return p()(this,t),A(this,t,arguments)}return g()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.onChangeInputValue,r=e.value,o=e.label,n=void 0===o?Object(m.__)("Select Popup","popup-maker"):o,i=e.emptyValueLabel,p=void 0===i?Object(m.__)("Choose a popup","popup-maker"):i,a=e.hideLabelFromVision,u=void 0!==a&&a,c=x()(e,N),l=[{value:"",label:p}].concat(D()(F.map((function(e){return{value:"".concat(e.ID),label:e.post_title}}))));return Object(b.createElement)("div",{className:"block-editor-popup-select-input"},Object(b.createElement)(v.SelectControl,y()({label:n,hideLabelFromVision:u,value:r,onChange:t,options:l},c)))}}])}(b.Component),L=["className","onChangeInputValue","value"];function B(e){var t=e.className,r=e.onChangeInputValue,o=e.value,n=x()(e,L);return Object(b.createElement)("form",y()({className:P()("block-editor-popup-trigger-popover__popup-editor",t)},n),Object(b.createElement)(R,{emptyValueLabel:Object(m.__)("Which popup should open?","popup-maker"),hideLabelFromVision:!0,value:o,onChange:r,required:!0}),Object(b.createElement)(v.IconButton,{icon:"editor-break",label:Object(m.__)("Apply","popup-maker"),type:"submit"}))}var V=["className","spanClassName","onEditLinkClick","popupId"],U=(window.pum_block_editor_vars||[]).popups;function Z(e){var t=e.popupId,r=e.className,o=P()(r,"block-editor-popup-trigger-popover__popup-viewer-text"),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e=parseInt(e)||0;var t=U.filter((function(t){var r=t.ID;return e===r}));return 1===t.length&&t[0]}(t),i=n?Object(m.sprintf)(Object(m.__)('Open "%s" popup',"popup-maker"),n.post_title):"";return Object(b.createElement)("span",{className:o},i)}function K(e){var t=e.className,r=e.spanClassName,o=e.onEditLinkClick,n=e.popupId,i=x()(e,V);return Object(b.createElement)("div",y()({className:P()("block-editor-popup-trigger-popover__popup-viewer",t)},i),Object(b.createElement)(Z,{popupId:n,className:r}),o&&Object(b.createElement)(v.IconButton,{icon:"edit",label:Object(m.__)("Edit","popup-maker"),onClick:o}))}var z=["isActive","addingTrigger","value"];function H(e,t,r){return t=d()(t),l()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],d()(e).constructor):t.apply(e,r))}var W=function(e){return e.stopPropagation()};function q(e,t){return e.addingTrigger||t.editTrigger}var G=function(e){var t=e.isActive,r=e.addingTrigger,o=e.value,n=x()(e,z),i=Object(b.useMemo)((function(){var e=window.getSelection(),t=e.rangeCount>0?e.getRangeAt(0):null;if(t){if(r)return Object(k.getRectangleFromRange)(t);var o=t.startContainer;for(o=o.nextElementSibling||o;o.nodeType!==window.Node.ELEMENT_NODE;)o=o.parentNode;var n=o.closest("span.popup-trigger");return n?n.getBoundingClientRect():void 0}}),[t,r,o.start,o.end]);return i?Object(b.createElement)(S,y()({anchorRect:i},n)):null},$=function(e){function t(){var e;return p()(this,t),(e=H(this,t,arguments)).editTrigger=e.editTrigger.bind(e),e.setPopupID=e.setPopupID.bind(e),e.setDoDefault=e.setDoDefault.bind(e),e.onFocusOutside=e.onFocusOutside.bind(e),e.submitTrigger=e.submitTrigger.bind(e),e.resetState=e.resetState.bind(e),e.state={doDefault:!1,popupId:""},e}return g()(t,e),u()(t,[{key:"onKeyDown",value:function(e){[j.LEFT,j.DOWN,j.RIGHT,j.UP,j.BACKSPACE,j.ENTER].indexOf(e.keyCode)>-1&&e.stopPropagation()}},{key:"setPopupID",value:function(e){var t=this.props.noticeOperations;t.removeNotice("missingPopupId"),""===e&&t.createNotice({id:"missingPopupId",status:"error",content:Object(m.__)("Choose a popup or the trigger won't function.","popup-maker")}),this.setState({popupId:e})}},{key:"setDoDefault",value:function(e){var t=this.props,r=t.activeAttributes.popupId,o=void 0===r?0:r,i=t.value,p=t.onChange;this.setState({doDefault:e}),q(this.props,this.state)||p(Object(n.applyFormat)(i,w({popupId:o,doDefault:e})))}},{key:"editTrigger",value:function(e){this.setState({editTrigger:!0}),e.preventDefault()}},{key:"submitTrigger",value:function(e){var t=this.props,r=t.isActive,o=t.value,i=t.onChange,p=t.speak,a=this.state,u=w({popupId:a.popupId,doDefault:a.doDefault});if(e.preventDefault(),Object(n.isCollapsed)(o)&&!r){var c=Object(n.applyFormat)(Object(n.create)({text:Object(m.__)("Open Popup","popup-maker")}),u,0,Object(m.__)("Open Popup","popup-maker").length);i(Object(n.insert)(o,c))}else i(Object(n.applyFormat)(o,u));this.resetState(),p(r?Object(m.__)("Trigger edited.","popup-maker"):Object(m.__)("Trigger inserted.","popup-maker"),"assertive")}},{key:"onFocusOutside",value:function(){this.resetState()}},{key:"resetState",value:function(){this.props.stopAddingTrigger(),this.setState({editTrigger:!1})}},{key:"render",value:function(){var e=this,t=this.props,r=t.isActive,o=t.addingTrigger,n=t.value,i=t.noticeUI;if(!r&&!o)return null;var p=this.state,a=p.popupId,u=p.doDefault,c=q(this.props,this.state);return Object(b.createElement)(G,{value:n,isActive:r,addingTrigger:o,onFocusOutside:this.onFocusOutside,onClose:this.resetState,noticeUI:i,focusOnMount:!!c&&"firstElement",renderSettings:function(){return Object(b.createElement)(v.ToggleControl,{label:Object(m.__)("Do default browser action?","popup-maker"),checked:u,onChange:e.setDoDefault})}},c?Object(b.createElement)(B,{className:"editor-format-toolbar__link-container-content block-editor-format-toolbar__link-container-content",value:a,onChangeInputValue:this.setPopupID,onKeyDown:this.onKeyDown,onKeyPress:W,onSubmit:this.submitTrigger}):Object(b.createElement)(K,{className:"editor-format-toolbar__link-container-content block-editor-format-toolbar__link-container-content",onKeyPress:W,popupId:a,onEditLinkClick:this.editTrigger}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.activeAttributes,o=r.popupId,n=void 0===o?"":o,i=r.doDefault,p=void 0!==i&&i;if(window._.isString(p)&&(p="1"===p),!q(e,t)){var a={};return n!==t.popupId&&(a.popupId=n),p!==t.doDefault&&(a.doDefault=p),Object.keys(a).length?a:null}return null}}])}(b.Component),J=Object(v.withSpokenMessages)(Object(v.withNotices)($));function Q(e,t,r){return t=d()(t),l()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],d()(e).constructor):t.apply(e,r))}var X=Object(m.__)("Popup Trigger","popup-maker"),Y="popup-maker/popup-trigger",ee={name:Y,title:X,tagName:"span",className:"popup-trigger",attributes:{popupId:"data-popup-id",doDefault:"data-do-default"},edit:Object(v.withSpokenMessages)(function(e){function t(){var e;return p()(this,t),(e=Q(this,t,arguments)).addTrigger=e.addTrigger.bind(e),e.stopAddingTrigger=e.stopAddingTrigger.bind(e),e.onRemoveFormat=e.onRemoveFormat.bind(e),e.state={addingTrigger:!1},e}return g()(t,e),u()(t,[{key:"addTrigger",value:function(){this.setState({addingTrigger:!0})}},{key:"stopAddingTrigger",value:function(){this.setState({addingTrigger:!1})}},{key:"onRemoveFormat",value:function(){var e=this.props,t=e.value,r=e.onChange,o=e.speak;r(Object(n.removeFormat)(t,Y)),o(Object(m.__)("Trigger removed.","popup-maker"),"assertive")}},{key:"render",value:function(){var e=this.props,t=e.isActive,r=e.activeAttributes,o=e.value,n=e.onChange;return Object(b.createElement)(b.Fragment,null,Object(b.createElement)(h.RichTextShortcut,{type:"primary",character:"[",onUse:this.addTrigger}),Object(b.createElement)(h.RichTextShortcut,{type:"primaryShift",character:"[",onUse:this.onRemoveFormat}),t&&Object(b.createElement)(h.RichTextToolbarButton,{icon:_,title:Object(m.__)("Remove Trigger","popup-maker"),onClick:this.onRemoveFormat,isActive:t,shortcutType:"primaryShift",shortcutCharacter:"["}),!t&&Object(b.createElement)(h.RichTextToolbarButton,{icon:_,title:X,onClick:this.addTrigger,isActive:t,shortcutType:"primary",shortcutCharacter:"["}),Object(b.createElement)(J,{addingTrigger:this.state.addingTrigger,stopAddingTrigger:this.stopAddingTrigger,isActive:t,activeAttributes:r,value:o,onChange:n}))}}])}(b.Component))};[o].forEach((function(e){var t=e.name,r=e.settings;return Object(n.registerFormatType)(t,r)}));var te=r(14),re=r(19),oe=Object(b.createElement)("svg",{viewBox:"0 0 512 512",width:20,height:20},Object(b.createElement)("path",{d:"M348,327.195v-35.741l-32.436-11.912c-2.825-10.911-6.615-21.215-12.216-30.687l0.325-0.042l15.438-32.153l-25.2-25.269  l-32.118,15.299l-0.031,0.045c-9.472-5.601-19.758-9.156-30.671-11.978L219.186,162h-35.739l-11.913,32.759  c-10.913,2.821-21.213,6.774-30.685,12.379l-0.048-0.248l-32.149-15.399l-25.269,25.219l15.299,32.124l0.05,0.039  c-5.605,9.471-11.159,19.764-13.98,30.675L50,291.454v35.741l34.753,11.913c2.821,10.915,7.774,21.211,13.38,30.685l0.249,0.045  l-15.147,32.147l25.343,25.274l32.188-15.298l0.065-0.046c9.474,5.597,19.782,10.826,30.695,13.652L183.447,460h35.739  l11.915-34.432c10.913-2.826,21.209-7.614,30.681-13.215l0.05-0.175l32.151,15.192l25.267-25.326l-15.299-32.182l-0.046-0.061  c5.601-9.473,8.835-19.776,11.66-30.688L348,327.195z M201.318,368.891c-32.897,0-59.566-26.662-59.566-59.565  c0-32.896,26.669-59.568,59.566-59.568c32.901,0,59.566,26.672,59.566,59.568C260.884,342.229,234.219,368.891,201.318,368.891z"}),Object(b.createElement)("path",{d:"M462.238,111.24l-7.815-18.866l-20.23,1.012c-3.873-5.146-8.385-9.644-13.417-13.42l0.038-0.043l1.06-20.318l-18.859-7.822  L389.385,66.89l-0.008,0.031c-6.229-0.883-12.619-0.933-18.988-0.025L356.76,51.774l-18.867,7.815l1.055,20.32  c-5.152,3.873-9.627,8.422-13.403,13.46l-0.038-0.021l-20.317-1.045l-7.799,18.853l15.103,13.616l0.038,0.021  c-0.731,5.835-1.035,12.658-0.133,19.038l-15.208,13.662l7.812,18.87l20.414-1.086c3.868,5.144,8.472,9.613,13.495,13.385  l0.013,0.025l-1.03,20.312l20.668,7.815L374,201.703v-0.033c4,0.731,10.818,0.935,17.193,0.04l12.729,15.114l18.42-7.813  l-1.286-20.324c5.144-3.875,9.521-8.424,13.297-13.456l-0.023,0.011l20.287,1.047l7.802-18.864l-15.121-13.624l-0.033-0.019  c0.877-6.222,0.852-12.58-0.05-18.953L462.238,111.24z M392.912,165.741c-17.359,7.19-37.27-1.053-44.462-18.421  c-7.196-17.364,1.047-37.272,18.415-44.465c17.371-7.192,37.274,1.053,44.471,18.417  C418.523,138.643,410.276,158.547,392.912,165.741z"})),ne=[],ie=pum_block_editor_vars.popup_trigger_excluded_blocks||["core/nextpage"];function pe(e){return!ne.length&&!ie.length||(ne.length?ne.includes(e):!ie.length||!ie.includes(e))}var ae=Object(re.createHigherOrderComponent)((function(e){return function(t){var r=t.name,o=t.attributes,n=t.setAttributes,i=t.isSelected,p=o.openPopupId;return Object(b.createElement)(b.Fragment,null,Object(b.createElement)(e,t),i&&pe(r)&&Object(b.createElement)(h.InspectorControls,null,Object(b.createElement)(v.Panel,{className:"pum-block-inspector-popup-controls"},Object(b.createElement)(v.PanelBody,{title:Object(m.__)("Popup Controls","popup-maker"),icon:oe,initialOpen:!1},Object(b.createElement)(v.PanelRow,null,Object(m.__)("These settings allow you to control popups with this block.","popup-maker")),Object(b.createElement)(v.PanelRow,null,Object(b.createElement)(R,{label:Object(b.createElement)(b.Fragment,null,Object(m.__)("Open Popup","popup-maker"),Object(b.createElement)(v.Tooltip,{position:"top",text:Object(m.__)("This method does not work well with all block types.","popup-maker")},Object(b.createElement)("a",{href:"https://wppopupmaker.com/docs/triggering-popups/trigger-click-open-overview-methods/",target:"_blank",rel:"noopener noreferrer"},Object(b.createElement)(v.Icon,{size:"16",icon:"editor-help",title:Object(m.__)("Open documentation","popup-maker"),style:{verticalAlign:"middle"}})))),value:p,onChange:function(e){return n({openPopupId:e})},help:Object(m.__)("Open a popup when clicking this block","popup-maker")}))))))}}),"withAdvancedControls");Object(te.addFilter)("blocks.registerBlockType","popup-maker/popup-trigger-attributes",(function(e){return void 0!==e.attributes&&pe(e.name)&&(e.attributes=Object.assign(e.attributes,{openPopupId:{type:"string",default:""}})),e})),Object(te.addFilter)("editor.BlockEdit","popup-maker/popup-trigger-advanced-control",ae),Object(te.addFilter)("blocks.getSaveContent.extraProps","popup-maker/applyTriggerClass",(function(e,t,r){var o=r.openPopupId;return void 0!==o&&o>0&&pe(t.name)&&(e.className=P()(e.className,"popmake-"+o)),e}))}]);