function pumSelected(e,t,o){"use strict";var i=!1;return"object"==typeof e&&"string"==typeof t&&-1!==jQuery.inArray(t,e)?i=!0:"object"==typeof t&&"string"==typeof e&&-1!==jQuery.inArray(e,t)?i=!0:e===t&&(i=!0),i&&void 0!==o&&o?' selected="selected"':i}function pumChecked(e,t,o){"use strict";var i=!1;return"object"==typeof e&&"string"==typeof t&&-1!==jQuery.inArray(t,e)?i=!0:"object"==typeof t&&"string"==typeof e&&-1!==jQuery.inArray(e,t)?i=!0:e===t&&(i=!0),i&&void 0!==o&&o?' checked="checked"':i}!function(e,t,o){"use strict";e(t).on("click","#popup_reset_open_count",function(){var t=e(this);t.is(":checked")&&!confirm(pum_admin.I10n.confirm_count_reset)&&t.prop("checked",!1)})}(jQuery,document);var PUMColorPickers;!function(e,t,o){"use strict";PUMColorPickers={init:function(){e(".color-picker").filter(":not(.initialized)").addClass("initialized").wpColorPicker({change:function(t){var o=e(t.currentTarget);o.hasClass("background-color")&&o.parents("table").find(".background-opacity").show(),PUMUtils.throttle(function(){PopMakeAdmin.update_theme()},50)},clear:function(t){var o=e(t.currentTarget).prev();o.hasClass("background-color")&&o.parents("table").find(".background-opacity").hide(),PopMakeAdmin.update_theme()}})}},e(t).on("pum_init",PUMColorPickers.init)}(jQuery,document);var PUMConditions;!function(e,t,o){"use strict";PUMConditions={templates:{},addGroup:function(o,i){var n=e("#pum-popup-conditions"),a={index:n.find(".facet-group-wrap").length,conditions:[{target:o||null,not_operand:i||!1,settings:{}}]};n.find(".facet-groups").append(PUMConditions.templates.group(a)),n.find(".facet-builder").addClass("has-conditions"),e(t).trigger("pum_init")},renumber:function(){e("#pum-popup-conditions .facet-group-wrap").each(function(){var t=e(this),o=t.parent().children().index(t);t.data("index",o).find(".facet").each(function(){var t=e(this),i=t.parent().children().index(t);t.data("index",i).find("[name]").each(function(){var e="popup_conditions["+o+"]["+i+"]";this.name=this.name.replace(/popup_conditions\[\d*?\]\[\d*?\]/,e),this.id=this.name})})})}},e(t).on("pum_init",PUMConditions.renumber).ready(function(){e("body.post-type-popup form#post").length&&(PUMConditions.templates.group=_.template(e("#pum_condition_group_templ").text()),PUMConditions.templates.facet=_.template(e("#pum_condition_facet_templ").text()),PUMConditions.templates.settings={},e("script.templ.pum-condition-settings").each(function(){var t=e(this);PUMConditions.templates.settings[t.data("condition")]=_.template(t.text())}),PUMConditions.renumber())}).on("select2:select","#pum-first-condition",function(){var t=e(this),o=t.val(),i=e("#pum-first-condition-operand"),n=i.is(":checked")?i.val():null;PUMConditions.addGroup(o,n),t.val(null).trigger("change"),i.prop("checked",!1).parents(".pum-condition-target").removeClass("not-operand-checked")}).on("click","#pum-popup-conditions .pum-not-operand",function(){var t=e(this),o=t.find("input"),i=t.parents(".pum-condition-target");o.is(":checked")?(i.removeClass("not-operand-checked"),o.prop("checked",!1)):(i.addClass("not-operand-checked"),o.prop("checked",!0))}).on("change","#pum-popup-conditions select.target",function(){var i=e(this),n=i.val(),a={index:i.parents(".facet-group").find(".facet").length,target:n,settings:{}};""!==n&&n!==i.parents(".facet").data("target")&&PUMConditions.templates.settings[n]!==o&&(i.parents(".facet").data("target",n).find(".facet-settings").html(PUMConditions.templates.settings[n](a)),e(t).trigger("pum_init"))}).on("click","#pum-popup-conditions .facet-group-wrap:last-child .and .add-facet",PUMConditions.addGroup).on("click","#pum-popup-conditions .add-or .add-facet:not(.disabled)",function(){var o=e(this),i=o.parents(".facet-group-wrap"),n={group:i.data("index"),index:i.find(".facet").length,target:null,settings:{}};i.find(".facet-list").append(PUMConditions.templates.facet(n)),e(t).trigger("pum_init")}).on("click","#pum-popup-conditions .remove-facet",function(){var t=e(this),o=e("#pum-popup-conditions"),i=t.parents(".facet"),n=t.parents(".facet-group-wrap");i.remove(),0===n.find(".facet").length&&(n.prev(".facet-group-wrap").find(".and .add-facet").removeClass("disabled"),n.remove(),0===o.find(".facet-group-wrap").length&&o.find(".facet-builder").removeClass("has-conditions")),PUMConditions.renumber()})}(jQuery,document);var PUMCookies;!function(e,t,o){"use strict";var i=pum_admin.I10n,n=pum_admin.defaults;PUMCookies={getLabel:function(e){return i.labels.cookies[e].name},getSettingsDesc:function(e,t){var o=_.template(i.labels.cookies[e].settings_column);return t.I10n=i,o(t)},renumber:function(){e("#pum_popup_cookies_list tbody tr").each(function(){var t=e(this),o=t.parent().children().index(t),i=t.data("index");t.data("index",o),t.find("[name]").each(function(){var e="["+o+"]";this.name=this.name.replace("["+i+"]",e).replace("[]",e)})})},refreshDescriptions:function(){e("#pum_popup_cookies_list tbody tr").each(function(){var t=e(this),o=t.find(".popup_cookies_field_event").val(),i=JSON.parse(t.find(".popup_cookies_field_settings:first").val());t.find("td.settings-column").html(PUMCookies.getSettingsDesc(o,i))})},initEditForm:function(){PUMCookies.updateSessionsCheckbox()},updateSessionsCheckbox:function(){var t=e(".cookie-editor .pum-form"),o=t.find('.field.checkbox.session input[type="checkbox"]').is(":checked"),i=t.find(".field").filter(".time");o?i.hide():i.show()},resetCookieKey:function(){var t=e(this),o=(new Date).getTime().toString(16);t.parents(".pum-form").find(".field.text.name").data("cookiekey",o),t.siblings('input[type="text"]:first').val(o)}},e(t).on("select2:select","#pum-first-cookie",function(){var t=e(this),a=t.val(),s="#pum_cookie_settings_"+a,r=_.template(e("script"+s+"_templ").html()),p={};p.cookie_settings=n.cookies[a]!==o?n.cookies[a]:{},p.cookie_settings.name="pum-"+e("#post_ID").val(),p.save_button_text=i.add,p.index=null,r.length||alert("Something went wrong. Please refresh and try again."),PUMModals.reload(s,r(p)),PUMCookies.initEditForm(s),t.val(null).trigger("change")}).on("click",".field.cookiekey button.reset",PUMCookies.resetCookieKey).on("click",".cookie-editor .pum-form .field.checkbox.session",PUMCookies.updateSessionsCheckbox).on("click","#pum_popup_cookies .add-new",function(){var t=_.template(e("script#pum_cookie_add_event_templ").html());PUMModals.reload("#pum_cookie_add_event_modal",t())}).on("click","#pum_popup_cookies_list .edit",function(t){var o=e(this),n=o.parents("tr:first"),a=n.find(".popup_cookies_field_event").val(),s="#pum_cookie_settings_"+a,r=_.template(e("script"+s+"_templ").html()),p={index:n.parent().children().index(n),event:a,cookie_settings:JSON.parse(n.find(".popup_cookies_field_settings:first").val())};t.preventDefault(),p.save_button_text=i.save,r.length||alert("Something went wrong. Please refresh and try again."),PUMModals.reload(s,r(p)),PUMCookies.initEditForm()}).on("click","#pum_popup_cookies_list .remove",function(t){var o=e(this),n=o.parents("tr:first");t.preventDefault(),window.confirm(i.confirm_delete_cookie)&&(n.remove(),e("#pum_popup_cookies_list tbody tr").length||(e("#pum-first-cookie").val(null).trigger("change"),e("#pum_popup_cookie_fields").removeClass("has-cookies")),PUMCookies.renumber())}).on("submit","#pum_cookie_add_event_modal .pum-form",function(t){var a=e("#popup_cookie_add_event").val(),s="#pum_cookie_settings_"+a,r=_.template(e("script"+s+"_templ").html()),p={};t.preventDefault(),p.cookie_settings=n.cookies[a]!==o?n.cookies[a]:{},p.cookie_settings.name="pum-"+e("#post_ID").val(),p.save_button_text=i.add,p.index=null,r.length||alert("Something went wrong. Please refresh and try again."),PUMModals.reload(s,r(p)),PUMCookies.initEditForm(s)}).on("submit",".cookie-editor .pum-form",function(t){var o,n,a,s=e(this),r=(s.find("input.event").val(),s.serializeObject()),p=parseInt(r.index),l=p>=0?e("#pum_popup_cookies_list tbody tr").eq(p):null,c=_.template(e("script#pum_cookie_row_templ").html());t.preventDefault(),p>=0||(r.index=e("#pum_popup_cookies_list tbody tr").length),r.I10n=i,o=c(r),l?l.replaceWith(o):e("#pum_popup_cookies_list tbody").append(o),PUMModals.closeAll(),PUMCookies.renumber(),e("#pum_popup_cookie_fields").addClass("has-cookies"),PUMTriggers.new_cookie>=0&&(n=e("#pum_popup_triggers_list tbody tr").eq(PUMTriggers.new_cookie).find(".popup_triggers_field_settings:first"),a=JSON.parse(n.val()),a.cookie.name[a.cookie.name.indexOf("add_new")]=r.cookie_settings.name,n.val(JSON.stringify(a)),PUMTriggers.new_cookie=-1,PUMTriggers.refreshDescriptions())}).ready(function(){PUMCookies.refreshDescriptions(),e("#pum-first-cookie").val(null).trigger("change")})}(jQuery,document),function(e,t,o){"use strict";var i={init:function(){e("#popmake_popup_auto_open_fields, #popmake_popup_targeting_condition_fields").length&&(i.initialize_popup_page(),i.attachQuickSearchListeners(),i.attachTabsPanelListeners())},attachTabsPanelListeners:function(){e("#poststuff").bind("click",function(t){var o,i,n,a,s,r,p,l,c,u,d,_,m,f,h=e(t.target);if(h.hasClass("nav-tab-link"))i=h.data("type"),n=h.parents(".posttypediv, .taxonomydiv").first(),e("input",n).removeAttr("checked"),e(".tabs-panel-active",n).removeClass("tabs-panel-active").addClass("tabs-panel-inactive"),e("#"+i,n).removeClass("tabs-panel-inactive").addClass("tabs-panel-active"),e(".tabs",n).removeClass("tabs"),h.parent().addClass("tabs"),e(".quick-search",n).focus(),t.preventDefault();else if(h.hasClass("select-all"))o=/#(.*)$/.exec(t.target.href),o&&o[1]&&(a=e("#"+o[1]+" .tabs-panel-active .menu-item-title input"),a.length===a.filter(":checked").length?a.removeAttr("checked"):a.prop("checked",!0));else if(h.hasClass("submit-add-to-menu")){for(s=h.parents(".options"),r=e('.tabs-panel-active input[type="checkbox"]:checked',s),p=e("textarea",s),l=e(".tagchecklist",s),c=p.val().split(","),u=0;u<c.length;u+=1)c[u]=parseInt(c[u],10);r.each(function(){d=e(this),_=parseInt(d.val(),10),m=d.parent("label").siblings(".menu-item-title").val(),-1===e.inArray(_,c)&&c.push(_),l.append('<span><a class="ntdelbutton" data-id="'+_+'">X</a> '+m+"</span>")}),p.text(c.join(",")),t.preventDefault()}else h.hasClass("ntdelbutton")&&(d=h,f=parseInt(d.data("id"),10),s=h.parents(".options"),p=e("textarea",s),l=e(".tagchecklist",s),c=p.val().split(","),c=e.grep(c,function(e){return parseInt(e,10)!==parseInt(f,10)}),d.parent("span").remove(),p.text(c.join(",")))})},attachQuickSearchListeners:function(){var t;e(".quick-search").keypress(function(o){var n=e(this);return 13===o.which?(i.updateQuickSearchResults(n),!1):(t&&clearTimeout(t),void(t=setTimeout(function(){i.updateQuickSearchResults(n)},400)))}).attr("autocomplete","off")},updateQuickSearchResults:function(t){var o,n,a=2,s=t.val();s.length<a||(o=t.parents(".tabs-panel"),n={action:"menu-quick-search","response-format":"markup",menu:null,"menu-settings-column-nonce":e("#menu-settings-column-nonce").val(),q:s,type:t.attr("name")},e(".spinner",o).show(),e.post(ajaxurl,n,function(e){i.processQuickSearchQueryResponse(e,n,o)}))},processQuickSearchQueryResponse:function(t,o,i){var n,a,s,r=e("form#post"),p={},l=/menu-item[(\[\^]\]*/,c=e("<div>").html(t).find("li");return c.length?(c.each(function(){if(s=e(this),n=l.exec(s.html()),n&&n[1]){for(a=n[1];r.elements["menu-item["+a+"][menu-item-type]"]||p[a];)a-=1;p[a]=!0,a!==n[1]&&s.html(s.html().replace(new RegExp("menu-item\\["+n[1]+"\\]","g"),"menu-item["+a+"]"))}}),e(".categorychecklist",i).html(c),e(".spinner",i).hide(),void e('[name^="menu-item"]').removeAttr("name")):(e(".categorychecklist",i).html("<li><p>noResultsFound</p></li>"),void e(".spinner",i).hide())},initialize_popup_page:function(){var o=function(t){var o,i,n=t.siblings(".options");t.is(":checked")?(n.show(),"popup_targeting_condition_on_entire_site"===t.attr("id")?(o=t.parents("#popmake_popup_targeting_condition_fields").find('[id^="targeting_condition-exclude_on_"]'),i=t.parents(".targeting_condition").siblings(".targeting_condition"),i.hide(),e("> *",i).prop("disabled",!0),o.show(),e("> *",o).prop("disabled",!1)):e("*",n).prop("disabled",!1)):(n.hide(),"popup_targeting_condition_on_entire_site"===t.attr("id")?(o=t.parents("#popmake_popup_targeting_condition_fields").find('[id^="targeting_condition-exclude_on_"]'),i=t.parents(".targeting_condition").siblings(".targeting_condition"),i.show(),e("> *",i).prop("disabled",!1),o.hide(),e("> *",o).prop("disabled",!0)):e("*",n).prop("disabled",!0))},i=function(t){var o=t.parents(".options").find('input[type="checkbox"]:eq(0)'),i=o.attr("name").indexOf("exclude")>=0,n=i?o.attr("name").replace("popup_targeting_condition_exclude_on_specific_",""):o.attr("name").replace("popup_targeting_condition_on_specific_",""),a=e(i?"#exclude_on_specific_"+n:"#on_specific_"+n);t.is(":checked")&&("true"===t.val()?(o.prop("checked",!0),a.show(),e("*",a).prop("disabled",!1)):""===t.val()&&(o.prop("checked",!1),a.hide(),e("*",a).prop("disabled",!0)))},n=function(){e("#popup_auto_open_session_cookie").is(":checked")?e(".not-session-cookie").hide():e(".not-session-cookie").show()},a=function(){e("#popup_auto_open_enabled").is(":checked")?(e(".auto-open-enabled").show(),n()):e(".auto-open-enabled").hide()},s=function(){e("#popup_auto_open_cookie_key").val((new Date).getTime().toString(16))};e('[name^="menu-item"]').removeAttr("name"),e("#title").prop("required",!0),e(t).on("click","#popup_auto_open_session_cookie",function(){n()}).on("click","#popup_auto_open_enabled",function(){a()}).on("click",".popmake-reset-auto-open-cookie-key",function(){s()}),e('#popmake_popup_targeting_condition_fields .targeting_condition > input[type="checkbox"]').on("click",function(){o(e(this))}).each(function(){o(e(this))}),e('input[type="radio"][id*="popup_targeting_condition_"]').on("click",function(){i(e(this))}).each(function(){i(e(this))}),e(".posttypediv, .taxonomydiv").each(function(){var t=e(this),o=e("> ul li"),i=e(".tabs-panel",t);o.removeClass("tabs"),o.eq(0).addClass("tabs"),i.removeClass("tabs-panel-active").addClass("tabs-panel-inactive").removeAttr("style"),i.eq(0).removeClass("tabs-panel-inactive").addClass("tabs-panel-active")}),a(),""===e("#popup_auto_open_cookie_key").val()&&s()}};e(t).ready(function(){i.init(),e(t).trigger("pum_init")})}(jQuery,document);var PUMMarketing;!function(e,t,o){"use strict";PUMMarketing={init:function(){e('#menu-posts-popup ul li a[href="edit.php?post_type=popup&page=extensions"]').css({color:"#9aba27"})}},e(t).ready(PUMMarketing.init)}(jQuery,document);var PUMModals;!function(e,t,o){"use strict";var i,n,a,s=e("html"),r=e(t),p="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";PUMModals={forceFocus:function(e){a&&!a.contains(e.target)&&(e.stopPropagation(),a.focus())},trapEscapeKey:function(e){27===e.keyCode&&(PUMModals.closeAll(),e.preventDefault())},trapTabKey:function(t){if(9===t.keyCode){var o=a.find("*").filter(p).filter(":visible"),i=e(":focus"),n=o.length,s=o.index(i);t.shiftKey?0===s&&(o.get(n-1).focus(),t.preventDefault()):s===n-1&&(o.get(0).focus(),t.preventDefault())}},setFocusToFirstItem:function(){a.find(".pum-modal-content *").filter(p).filter(":visible").first().focus()},closeAll:function(t){e(".pum-modal-background").off("keydown.pum_modal").hide(0,function(){e("html").css({overflow:"visible",width:"auto"}),i&&(i.attr("aria-hidden","false"),i=null),n.length&&n.focus(),a=null,r.off("focus.pum_modal"),o!==t&&t()}).attr("aria-hidden","true")},show:function(t,r){e(".pum-modal-background").off("keydown.pum_modal").hide(0).attr("aria-hidden","true"),s.data("origwidth",s.innerWidth()).css({overflow:"hidden",width:s.innerWidth()});var p=e(":focus");p.parents(".pum-modal-wrap").length||(n=p),a=e(t),a.on("keydown.pum_modal",function(e){PUMModals.trapEscapeKey(e),PUMModals.trapTabKey(e)}).show(0,function(){i=e("body > *").filter(":visible").not(a),i.attr("aria-hidden","true"),a.trigger("pum_init").on("focus.pum_modal",PUMModals.forceFocus),PUMModals.setFocusToFirstItem(),o!==r&&r()}).attr("aria-hidden","false")},remove:function(t){e(t).remove()},replace:function(t,o){PUMModals.remove(e.trim(t)),e("body").append(e.trim(o))},reload:function(e,t,o){PUMModals.replace(e,t),PUMModals.show(e,o)}},e(t).on("click",".pum-modal-background, .pum-modal-wrap .cancel, .pum-modal-wrap .pum-modal-close",function(t){var o=e(t.target);(o.hasClass("pum-modal-background")||o.hasClass("cancel")||o.hasClass("pum-modal-close")||o.hasClass("submitdelete"))&&(PUMModals.closeAll(),t.preventDefault(),t.stopPropagation())})}(jQuery,document);var PUMRangeSLiders;!function(e,t,o){"use strict";PUMRangeSLiders={init:function(){var o,i,n,a,s,r=e('<input type="range"/>'),p=e('<button type="button" class="popmake-range-plus">+</button>'),l=e('<button type="button" class="popmake-range-minus">-</button>');e(".popmake-range-manual").filter(":not(.initialized)").each(function(){var c=e(this).addClass("initialized"),u=c.data("force-minmax"),d=parseInt(c.prop("min"),0),_=parseInt(c.prop("max"),0),m=parseInt(c.prop("step"),0),f=parseInt(c.val(),0);n=r.clone(),a=p.clone(),s=l.clone(),u&&f>_&&(f=_,c.val(f)),n.prop({min:d||0,max:u||_&&_>f?_:1.5*f,step:m||1.5*f/100,value:f}).on("change input",function(){c.trigger("input")}),c.next().after(s,a),c.before(n),o=t.createElement("input"),o.setAttribute("type","range"),"text"===o.type&&e("input[type=range]").each(function(t,o){i=e(o),n=e("<div />").slider({min:parseInt(i.attr("min"),10)||0,max:parseInt(i.attr("max"),10)||100,value:parseInt(i.attr("value"),10)||0,step:parseInt(i.attr("step"),10)||1,slide:function(t,o){e(this).prev("input").val(o.value)}}),i.after(n).hide()})})}},e(t).on("pum_init",PUMRangeSLiders.init).on("input",'input[type="range"]',function(){var t=e(this);t.siblings(".popmake-range-manual").val(t.val())}).on("click",".popmake-range-manual",function(){var t=e(this);t.prop("readonly",!1)}).on("focusout",".popmake-range-manual",function(){var t=e(this);t.prop("readonly",!0)}).on("change",".popmake-range-manual",function(){var t=e(this),o=parseInt(t.prop("max"),0),i=parseInt(t.prop("step"),0),n=t.data("force-minmax"),a=parseInt(t.val(),0),s=t.prev();n&&a>o&&(a=o,t.val(a)),s.prop({max:n||o&&o>a?o:1.5*a,step:i||1.5*a/100,value:a})}).on("click",".popmake-range-plus",function(t){var o=e(this).siblings(".popmake-range-manual"),i=parseInt(o.prop("step"),0),n=parseInt(o.val(),0),a=n+i,s=o.prev();t.preventDefault(),o.val(a).trigger("input"),s.val(a)}).on("click",".popmake-range-minus",function(t){var o=e(this).siblings(".popmake-range-manual"),i=parseInt(o.prop("step"),0),n=parseInt(o.val(),0),a=n-i,s=o.prev();t.preventDefault(),o.val(a).trigger("input"),s.val(a)})}(jQuery,document);var PUMSelect2Fields;!function(e,t,o){"use strict";PUMSelect2Fields={init:function(){e(".pum-select2 select").filter(":not(.initialized)").each(function(){var t=e(this),i=t.data("current"),n=t.data("objecttype"),a=t.data("objectkey"),s={multiple:!1,dropdownParent:t.parent()};t.attr("multiple")&&(s.multiple=!0),n&&a&&(s=e.extend(s,{ajax:{url:ajaxurl,dataType:"json",delay:250,data:function(e){return{s:e.term,page:e.page,action:"pum_object_search",object_type:n,object_key:a}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:10*t.page<e.total_count}}},cache:!0},cache:!0,escapeMarkup:function(e){return e},minimumInputLength:1,templateResult:PUMSelect2Fields.formatObject,templateSelection:PUMSelect2Fields.formatObjectSelection})),t.addClass("initialized").select2(s),i!==o&&("object"!=typeof i&&(i=[i]),n&&a?e.ajax({url:ajaxurl,data:{action:"pum_object_search",object_type:n,object_key:a,include:i},dataType:"json",success:function(o){e.each(o.items,function(e,o){t.find('option[value="'+o.id+'"]').length||t.prepend('<option value="'+o.id+'">'+o.text+"</option>")}),t.val(i).trigger("change")}}):t.val(i).trigger("change"))})},formatObject:function(e){return e.text},formatObjectSelection:function(e){return e.text||e.text}},e(t).on("pum_init",PUMSelect2Fields.init)}(jQuery,document),function(e,t,o){function i(t,o){return-1!==e.inArray(o,t)}function n(e,t,o){var i=t[0];t.length>1?(e[i]||(e[i]=t[1]?{}:[]),n(e[i],t.slice(1),o)):(i||(i=e.length),e[i]=o)}var a=this,e=a.jQuery||a.Zepto||a.ender,s="color,date,datetime,datetime-local,email,hidden,month,number,password,range,search,tel,text,time,url,week".split(","),r="select,textarea".split(","),p=/\[([^\]]*)\]/g;e.fn.serializeObject=function(t){t||(t={});var o={},a=e.extend(!0,{include:[],exclude:[],includeByClass:""},t);return this.find(":input").each(function(){var t;!this.name||this.disabled||i(a.exclude,this.name)||a.include.length&&!i(a.include,this.name)||-1===this.className.indexOf(a.includeByClass)||(t=this.name.replace(p,"[$1").split("["),t[0]&&(this.checked||i(s,this.type)||i(r,this.nodeName.toLowerCase()))&&("checkbox"===this.type&&t.push(""),n(o,t,e(this).val())))}),o}}(jQuery,document);var PUMTabs;!function(e,t,o){"use strict";PUMTabs={init:function(){e(".pum-tabs-container").filter(":not(.initialized)").each(function(){var t=e(this),o=t.find(".tab:first");t.find(".active").removeClass("active"),o.addClass("active"),e(o.find("a").attr("href")).addClass("active")})}},e(t).on("pum_init",PUMTabs.init).on("click",".pum-tabs-container .tab",function(t){var o=e(this),i=o.parents(".pum-tabs-container:first"),n=o.find("a").attr("href");i.find(".active").removeClass("active"),o.addClass("active"),e(n).addClass("active"),t.preventDefault()})}(jQuery,document);var PUM_Templates;!function(e,t,o){"use strict";var i=pum_admin.I10n;PUM_Templates={render:function(t,o){var i=_.template(e(t).html());return"object"==typeof o.classes&&(o.classes=o.classes.join(" ")),o=PUM_Templates.prepareMeta(o),i(o)},shortcode:function(t){var o=e.extend(!0,{},{tag:"",meta:{},has_content:!1,content:""},t),i=o.has_content?"#tmpl-pum-shortcode-w-content":"#tmpl-pum-shortcode";return PUM_Templates.render(i,o)},modal:function(t){var o=e.extend(!0,{},{id:"",title:"",description:"",classes:"",save_button:i.save,cancel_button:i.cancel,content:""},t);return PUM_Templates.render("#tmpl-pum-modal",o)},tabs:function(t){var o=t.classes||[],i=e.extend(!0,{},{id:"",vertical:!0,form:!0,classes:"",tabs:{general:{label:"General",content:""}}},t);return i.form&&o.push("tabbed-form"),i.vertical&&o.push("vertical-tabs"),i.classes=i.classes+" "+o.join(" "),PUM_Templates.render("#tmpl-pum-tabs",i)},section:function(t){var o=e.extend(!0,{},{classes:[],fields:[]},t);return PUM_Templates.render("#tmpl-pum-field-section",o)},field:function(t){var i="#tmpl-pum-field-"+t.type,n=[],a=e.extend(!0,{},{type:"text",id:"",id_prefix:"",name:"",label:null,placeholder:"",desc:null,size:"regular",classes:[],value:null,select2:!1,multiple:!1,as_array:!1,options:[],object_type:null,object_key:null,std:null,min:0,max:50,step:1,unit:"px",required:!1,meta:{}},t);if(!e(i).length&&(("objectselect"===t.type||"postselect"===t.type||"taxonomyselect"===t.type)&&(i="#tmpl-pum-field-select"),!e(i).length))return"";switch(a.value||t.std===o||(a.value=t.std),"string"==typeof a.classes&&(a.classes=a.classes.split(" ")),t["class"]!==o&&a.classes.push(t["class"]),a.required&&(a.meta.required=!0,a.classes.push("pum-required")),t.type){case"select":case"objectselect":case"postselect":case"taxonomyselect":a.options!==o&&(_.each(a.options,function(e,t){var o=!1;a.multiple&&a.value.indexOf(e)!==!1?o="selected":a.multiple||a.value!=e||(o="selected"),n.push(PUM_Templates.prepareMeta({label:t,value:e,meta:{selected:o}}))}),a.options=n),a.multiple&&(a.meta.multiple=!0,a.as_array&&(a.name+="[]"),a.value&&a.value.length||(a.value=[]),"string"==typeof a.value&&(a.value=[a.value])),"select"!==t.type&&(a.select2=!0,a.classes.push("pum-field-objectselect"),a.classes.push("postselect"===t.type?"pum-field-postselect":"pum-field-taxonomyselect"),a.meta["data-objecttype"]="postselect"===t.type?"post_type":"taxonomy",a.meta["data-objectkey"]="postselect"===t.type?t.post_type:t.taxonomy,a.meta["data-current"]=a.value),a.select2&&(a.classes.push("pum-select2"),a.placeholder&&(a.meta["data-placeholder"]=a.placeholder));break;case"multicheck":a.options!==o&&(_.each(a.options,function(e,t){n.push({label:t,value:e,meta:{checked:a.value.indexOf(e)>=0}})}),a.options=n);break;case"checkbox":1===parseInt(a.value,10)&&(a.meta.checked=!0);break;case"rangeslider":a.meta.readonly=!0,a.meta.step=a.step,a.meta.min=a.min,a.meta.max=a.max;break;case"textarea":a.meta.cols=a.cols,a.meta.rows=a.rows}return a.field=PUM_Templates.render(i,a),PUM_Templates.render("#tmpl-pum-field-wrapper",a)},prepareMeta:function(e){var t,o=[];for(t in e.meta)e.meta.hasOwnProperty(t)&&("boolean"==typeof e.meta[t]?e.meta[t]&&o.push(_.escape(t)):o.push(_.escape(t)+'="'+_.escape(e.meta[t])+'"'));return e.meta=o.join(" "),e}}}(jQuery,document);var PUMTriggers;!function(e,t,o){"use strict";var i=pum_admin.I10n,n=pum_admin.defaults;PUMTriggers={new_cookie:null,getLabel:function(e){return i.labels.triggers[e].name},getSettingsDesc:function(e,t){var o=_.template(i.labels.triggers[e].settings_column);return t.I10n=i,o(t)},renumber:function(){e("#pum_popup_triggers_list tbody tr").each(function(){var t=e(this),o=t.parent().children().index(t),i=t.data("index");t.data("index",o),t.find("input").each(function(){var e="["+o+"]";this.name=this.name.replace("["+i+"]",e).replace("[]",e)})})},refreshDescriptions:function(){e("#pum_popup_triggers_list tbody tr").each(function(){var t=e(this),o=t.find(".popup_triggers_field_type").val(),i=JSON.parse(t.find(".popup_triggers_field_settings:first").val()),n=PUMTriggers.cookie_column_value(i.cookie.name);t.find("td.settings-column").html(PUMTriggers.getSettingsDesc(o,i)),t.find("td.cookie-column code").text(n)})},initEditForm:function(t){var o=e(".trigger-editor .pum-form"),i=e("#name",o),n=t.trigger_settings;e("#pum_popup_cookies_list tbody tr").each(function(){var t=JSON.parse(e(this).find(".popup_cookies_field_settings:first").val());i.find('option[value="'+t.name+'"]').length||e('<option value="'+t.name+'">'+t.name+"</option>").appendTo(i)}),i.val(n.cookie.name),i.trigger("chosen:updated")},cookie_column_value:function(e){var t=i.no_cookie;return"array"==typeof e?t=e.join(", "):null!==e&&(t=e),t}},PUMTriggers.refreshDescriptions(),e(t).on("select2:select","#pum-first-trigger",function(){var t=e(this),a=t.val(),s="#pum_trigger_settings_"+a,r=_.template(e("script"+s+"_templ").html()),p={};p.trigger_settings=n.triggers[a]!==o?n.triggers[a]:{},p.save_button_text=i.add,p.index=null,r.length||alert("Something went wrong. Please refresh and try again."),PUMModals.reload(s,r(p)),PUMTriggers.initEditForm(p),t.val(null).trigger("change")}).on("click","#pum_popup_triggers .add-new",function(){var t=_.template(e("script#pum_trigger_add_type_templ").html());PUMModals.reload("#pum_trigger_add_type_modal",t())}).on("click","#pum_popup_triggers_list .edit",function(t){var o=e(this),n=o.parents("tr:first"),a=n.find(".popup_triggers_field_type").val(),s="#pum_trigger_settings_"+a,r=_.template(e("script"+s+"_templ").html()),p={index:n.parent().children().index(n),type:a,trigger_settings:JSON.parse(n.find(".popup_triggers_field_settings:first").val())};t.preventDefault(),p.save_button_text=i.save,r.length||alert("Something went wrong. Please refresh and try again."),PUMModals.reload(s,r(p)),PUMTriggers.initEditForm(p)}).on("click","#pum_popup_triggers_list .remove",function(t){var o=e(this),n=o.parents("tr:first");t.preventDefault(),window.confirm(i.confirm_delete_trigger)&&(n.remove(),e("#pum_popup_triggers_list tbody tr").length||(e("#pum-first-trigger").val(null).trigger("change"),e("#pum_popup_trigger_fields").removeClass("has-triggers")),PUMTriggers.renumber())}).on("submit","#pum_trigger_add_type_modal .pum-form",function(t){var a=e("#popup_trigger_add_type").val(),s="#pum_trigger_settings_"+a,r=_.template(e("script"+s+"_templ").html()),p={};t.preventDefault(),p.trigger_settings=n.triggers[a]!==o?n.triggers[a]:{},p.save_button_text=i.add,p.index=null,r.length||alert("Something went wrong. Please refresh and try again."),PUMModals.reload(s,r(p)),PUMTriggers.initEditForm(p)}).on("submit",".trigger-editor .pum-form",function(t){var o,n=e(this),a=(n.find("input.type").val(),n.serializeObject()),s=parseInt(a.index),r=s>=0?e("#pum_popup_triggers_list tbody tr").eq(s):null,p=_.template(e("script#pum_trigger_row_templ").html());t.preventDefault(),s>=0||(a.index=e("#pum_popup_triggers_list tbody tr").length),a.I10n=i,o=p(a),r?r.replaceWith(o):e("#pum_popup_triggers_list tbody").append(o),PUMModals.closeAll(),PUMTriggers.renumber(),e("#pum_popup_trigger_fields").addClass("has-triggers"),null!==a.trigger_settings.cookie.name&&a.trigger_settings.cookie.name.indexOf("add_new")>=0&&(PUMTriggers.new_cookie=a.index,e("#pum_popup_cookie_fields button.add-new").trigger("click"))}).ready(function(){PUMTriggers.refreshDescriptions(),e("#pum-first-trigger").val(null).trigger("change")})}(jQuery,document);var PUMUtils;!function(e,t,o){"use strict";PUMUtils={convert_meta_to_object:function(e){var t,i,n,a={};for(n in e)e.hasOwnProperty(n)&&(t=n.split(/_(.+)?/)[0],i=n.split(/_(.+)?/)[1],a[t]===o&&(a[t]={}),a[t][i]=e[n]);return a},serialize_form:function(t){var o={};return e("[name]",t).each(function(){var t,i,n=e(this).attr("name"),a=e(this).val(),s=n.split("["),r=o,p=s.length;for(t=0;p>t;t+=1)i=s[t].replace("]",""),r[i]||(r[i]={}),t!==s.length-1?r=r[i]:t===s.length-1&&(r[i]=a)}),o},convert_hex:function(e,t){e=e.replace("#","");var o=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16),a="rgba("+o+","+i+","+n+","+t/100+")";return a},debounce:function(e,t){var o;return function(){var i=this,n=arguments;window.clearTimeout(o),o=window.setTimeout(function(){e.apply(i,n)},t)}},throttle:function(e,t){var o=!1,i=function(){o=!1};return function(){o||(e(),window.setTimeout(i,t),o=!0)}}},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}}(jQuery,document);var PopMakeAdmin,PUM_Admin;!function(e,t,o){"use strict";var i=e(t);pum_admin.I10n,pum_admin.defaults;PUM_Admin={},PopMakeAdmin={init:function(){e("body.post-type-popup form#post").length&&PopMakeAdmin.initialize_popup_page(),e("body.post-type-popup_theme form#post").length&&PopMakeAdmin.initialize_theme_page()},initialize_popup_page:function(){var o=function(){"custom"===e("#popup_display_size").val()?(e(".custom-size-only").show(),e(".responsive-size-only").hide(),e("#popup_display_custom_height_auto").is(":checked")?e(".custom-size-height-only").hide():e(".custom-size-height-only").show()):(e(".custom-size-only").hide(),"auto"!==e("#popup_display_size").val()?(e(".responsive-size-only").show(),e("#popup_display_custom_height_auto").prop("checked",!1)):e(".responsive-size-only").hide())},i=function(){e(".animation-speed, .animation-origin").hide(),"fade"===e("#popup_display_animation_type").val()?e(".animation-speed").show():"none"!==e("#popup_display_animation_type").val()&&e(".animation-speed, .animation-origin").show()},n=function(){var t=e("#popup_display_location"),o=t.parents("table"),i=t.val();e("tr.top, tr.right, tr.left, tr.bottom",o).hide(),i.indexOf("top")>=0&&e("tr.top").show(),i.indexOf("left")>=0&&e("tr.left").show(),i.indexOf("bottom")>=0&&e("tr.bottom").show(),i.indexOf("right")>=0&&e("tr.right").show()};e("#popuptitlediv").insertAfter("#titlediv"),e("#title").prop("required",!0),e(t).on("keydown","#popuptitle",function(t){var o=t.keyCode||t.which;9===o&&(t.preventDefault(),e("#title").focus())}).on("keydown","#title, #popuptitle",function(t){var o,i=t.keyCode||t.which;t.shiftKey||9!==i||(t.preventDefault(),o="title"===e(this).attr("id")?"#popuptitle":"#insert-media-button",e(o).focus())}).on("keydown","#popuptitle, #insert-media-button",function(t){var o,i=t.keyCode||t.which;t.shiftKey&&9===i&&(t.preventDefault(),o="popuptitle"===e(this).attr("id")?"#title":"#popuptitle",e(o).focus())}).on("click","#popup_display_custom_height_auto",function(){o()}).on("change","#popup_display_size",function(){
"custom"!==e("#popup_display_size").val()&&"auto"!==e("#popup_display_size").val()&&e("#popup_display_position_fixed, #popup_display_scrollable_content").prop("checked",!1),o()}).on("change","#popup_display_animation_type",function(){i()}).on("change","#popup_display_location",function(){n()}),o(),i(),n()},theme_page_listeners:function(){var o=this;e(t).on("change","select.font-family",function(){e("select.font-weight option, select.font-style option",e(this).parents("table")).prop("selected",!1),o.update_font_selectboxes()}).on("change","select.font-weight, select.font-style",function(){o.update_font_selectboxes()}).on("change input focusout","select, input",function(){o.update_theme()}).on("change","select.border-style",function(){var t=e(this);"none"===t.val()?t.parents("table").find(".border-options").hide():t.parents("table").find(".border-options").show()}).on("change","#popup_theme_close_location",function(){var t=e(this),o=t.parents("table");e("tr.topleft, tr.topright, tr.bottomleft, tr.bottomright",o).hide(),e("tr."+t.val(),o).show()})},update_theme:function(){var t,o=e("[name^='popup_theme_']").serializeArray(),i={};for(t=0;o.length>t;t+=1)0===o[t].name.indexOf("popup_theme_")&&(i[o[t].name.replace("popup_theme_","")]=o[t].value);this.retheme_popup(i)},theme_preview_scroll:function(){var t=e("#popmake-theme-editor .empreview, body.post-type-popup_theme form#post #popmake_popup_theme_preview"),o=t.parent(),i=t.offset().top-50;e(window).on("scroll",function(){e("> .postbox:visible",o).index(t)===e("> .postbox:visible",o).length-1&&e(window).scrollTop()>=i?t.css({left:t.offset().left,width:t.width(),height:t.height(),position:"fixed",top:50}):t.removeAttr("style")})},update_font_selectboxes:function(){return e("select.font-family").each(function(){var t,i,n=e(this),a=n.parents("table").find("select.font-weight"),s=n.parents("table").find("select.font-style"),r=a.find("option"),p=s.find("option");if(popmake_google_fonts[n.val()]!==o){if(t=popmake_google_fonts[n.val()],r.hide(),p.hide(),t.variants.length)for(i=0;t.variants.length>i;i+=1)"regular"===t.variants[i]?(e('option[value=""]',a).show(),e('option[value=""]',s).show()):(t.variants[i].indexOf("italic")>=0&&e('option[value="italic"]',s).show(),e('option[value="'+parseInt(t.variants[i],10)+'"]',a).show())}else r.show(),p.show();a.parents("tr:first").show(),a.find("option:visible").length<=1?a.parents("tr:first").hide():a.parents("tr:first").show(),s.parents("tr:first").show(),s.find("option:visible").length<=1?s.parents("tr:first").hide():s.parents("tr:first").show()})},convert_theme_for_preview:function(e){},initialize_theme_page:function(){e("#popuptitlediv").insertAfter("#titlediv");var o=this,i=e("#popup_theme_close_location").parents("table");switch(o.update_theme(),o.theme_page_listeners(),o.theme_preview_scroll(),o.update_font_selectboxes(),e(t).on("click",".popmake-preview",function(t){t.preventDefault(),e("#popmake-preview, #popmake-overlay").css({visibility:"visible"}).show()}).on("click",".popmake-close",function(){e("#popmake-preview, #popmake-overlay").hide()}),e("select.border-style").each(function(){var t=e(this);"none"===t.val()?t.parents("table").find(".border-options").hide():t.parents("table").find(".border-options").show()}),e(".color-picker.background-color").each(function(){var t=e(this);""===t.val()?t.parents("table").find(".background-opacity").hide():t.parents("table").find(".background-opacity").show()}),e("tr.topleft, tr.topright, tr.bottomleft, tr.bottomright",i).hide(),e("#popup_theme_close_location").val()){case"topleft":e("tr.topleft",i).show();break;case"topright":e("tr.topright",i).show();break;case"bottomleft":e("tr.bottomleft",i).show();break;case"bottomright":e("tr.bottomright",i).show()}},retheme_popup:function(i){var n,a=e(".empreview .example-popup-overlay, #popmake-overlay"),s=e(".empreview .example-popup, #popmake-preview"),r=e(".title, .popmake-title",s),p=e(".content, .popmake-content",s),l=e(".close-popup, .popmake-close",s),c="yes"===i.container_boxshadow_inset?"inset ":"",u="yes"===i.close_boxshadow_inset?"inset ":"";switch(this.convert_theme_for_preview(i),popmake_google_fonts[i.title_font_family]!==o&&(n="//fonts.googleapis.com/css?family="+i.title_font_family,"normal"!==i.title_font_weight&&(n+=":"+i.title_font_weight),"italic"===i.title_font_style&&(-1===n.indexOf(":")&&(n+=":"),n+="italic"),e("body").append('<link href="'+n+'" rel="stylesheet" type="text/css">')),popmake_google_fonts[i.content_font_family]!==o&&(n="//fonts.googleapis.com/css?family="+i.content_font_family,"normal"!==i.content_font_weight&&(n+=":"+i.content_font_weight),"italic"===i.content_font_style&&(-1===n.indexOf(":")&&(n+=":"),n+="italic"),e("body").append('<link href="'+n+'" rel="stylesheet" type="text/css">')),popmake_google_fonts[i.close_font_family]!==o&&(n="//fonts.googleapis.com/css?family="+i.close_font_family,"normal"!==i.close_font_weight&&(n+=":"+i.close_font_weight),"italic"===i.close_font_style&&(-1===n.indexOf(":")&&(n+=":"),n+="italic"),e("body").append('<link href="'+n+'" rel="stylesheet" type="text/css">')),a.removeAttr("style").css({backgroundColor:PUMUtils.convert_hex(i.overlay_background_color,i.overlay_background_opacity)}),s.removeAttr("style").css({padding:i.container_padding+"px",backgroundColor:PUMUtils.convert_hex(i.container_background_color,i.container_background_opacity),borderStyle:i.container_border_style,borderColor:i.container_border_color,borderWidth:i.container_border_width+"px",borderRadius:i.container_border_radius+"px",boxShadow:c+i.container_boxshadow_horizontal+"px "+i.container_boxshadow_vertical+"px "+i.container_boxshadow_blur+"px "+i.container_boxshadow_spread+"px "+PUMUtils.convert_hex(i.container_boxshadow_color,i.container_boxshadow_opacity)}),r.removeAttr("style").css({color:i.title_font_color,lineHeight:i.title_line_height+"px",fontSize:i.title_font_size+"px",fontFamily:i.title_font_family,fontStyle:i.title_font_style,fontWeight:i.title_font_weight,textAlign:i.title_text_align,textShadow:i.title_textshadow_horizontal+"px "+i.title_textshadow_vertical+"px "+i.title_textshadow_blur+"px "+PUMUtils.convert_hex(i.title_textshadow_color,i.title_textshadow_opacity)}),p.removeAttr("style").css({color:i.content_font_color,fontFamily:i.content_font_family,fontStyle:i.content_font_style,fontWeight:i.content_font_weight}),l.html(i.close_text).removeAttr("style").css({padding:i.close_padding+"px",height:i.close_height>0?i.close_height+"px":"auto",width:i.close_width>0?i.close_width+"px":"auto",backgroundColor:PUMUtils.convert_hex(i.close_background_color,i.close_background_opacity),color:i.close_font_color,lineHeight:i.close_line_height+"px",fontSize:i.close_font_size+"px",fontFamily:i.close_font_family,fontWeight:i.close_font_weight,fontStyle:i.close_font_style,borderStyle:i.close_border_style,borderColor:i.close_border_color,borderWidth:i.close_border_width+"px",borderRadius:i.close_border_radius+"px",boxShadow:u+i.close_boxshadow_horizontal+"px "+i.close_boxshadow_vertical+"px "+i.close_boxshadow_blur+"px "+i.close_boxshadow_spread+"px "+PUMUtils.convert_hex(i.close_boxshadow_color,i.close_boxshadow_opacity),textShadow:i.close_textshadow_horizontal+"px "+i.close_textshadow_vertical+"px "+i.close_textshadow_blur+"px "+PUMUtils.convert_hex(i.close_textshadow_color,i.close_textshadow_opacity)}),i.close_location){case"topleft":l.css({top:i.close_position_top+"px",left:i.close_position_left+"px"});break;case"topright":l.css({top:i.close_position_top+"px",right:i.close_position_right+"px"});break;case"bottomleft":l.css({bottom:i.close_position_bottom+"px",left:i.close_position_left+"px"});break;case"bottomright":l.css({bottom:i.close_position_bottom+"px",right:i.close_position_right+"px"})}e(t).trigger("popmake-admin-retheme",[i])}},i.ready(function(){PopMakeAdmin.init(),i.trigger("pum_init")})}(jQuery,document);